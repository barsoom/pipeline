version: 2.1

orbs:
  ruby: circleci/ruby@2.1.1 # https://circleci.com/developer/orbs/orb/circleci/ruby
  heroku: circleci/heroku@2.0.0 # https://circleci.com/developer/orbs/orb/circleci/heroku

jobs:
  test:
    docker:
      - image: cimg/ruby:3.2.3 # NOTE: https://circleci.com/developer/images/image/cimg/ruby#image-tags
        environment:
          BUNDLE_PATH: vendor/bundle
      - image: redis:6.2.6-alpine # NOTE: Keep in sync with dev.yml
      - image: postgres:14.7-alpine # NOTE: Keep in sync with dev.yml
        environment:
          POSTGRES_USER: postgres
          POSTGRES_HOST_AUTH_METHOD: trust
    environment:

